<!-- perfil.component.html -->
<app-top-bar></app-top-bar>
<app-sidebar></app-sidebar>

<!-- Main Profile Section -->
<main class="profile-container">
  <div class="profile-card">
    <div class="profile-content">
      <!-- Avatar -->
      <div class="profile-avatar">
        <svg class="avatar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="8" r="4"></circle>
          <path d="M20 21a8 8 0 0 0-16 0"></path>
        </svg>
      </div>

      <!-- Profile Fields -->
      <div class="profile-fields">
        <div class="field-group">
          <span class="field-label">Nombre:</span>
          <div class="field-value">{{ profile.nombre }}</div>
        </div>
        <div class="field-group">
          <span class="field-label">Correo:</span>
          <div class="field-value">{{ profile.correo }}</div>
        </div>
        <div class="field-group">
          <span class="field-label">Teléfono:</span>
          <div class="field-value">{{ profile.telefono }}</div>
        </div>
        <div class="field-group">
          <span class="field-label">Rol:</span>
          <div class="field-value">{{ profile.rol }}</div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="button-group">
        <button (click)="openEditModal()" class="primary-button">Editar Perfil</button>
        <button (click)="openPasswordModal()" class="link-button">Cambiar la Contraseña</button>
      </div>
    </div>
  </div>

  <!-- Edit Profile Modal -->
  <div *ngIf="showEditModal" class="modal-overlay">
    <div class="modal-container">
      <div class="modal-header">
        <h2 class="modal-title">Editar Perfil</h2>
        <button (click)="closeAllModals()" class="close-button">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="edit-avatar-container">
          <div class="profile-avatar">
            <svg class="avatar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="8" r="4"></circle>
              <path d="M20 21a8 8 0 0 0-16 0"></path>
            </svg>
          </div>
          <button (click)="openPhotoModal()" class="photo-link">Cambiar Foto</button>
        </div>
        <div class="form-fields">
          <div class="form-group">
            <label class="form-label" for="nombre">Nombre</label>
            <input id="nombre" type="text" name="nombre" [(ngModel)]="profile.nombre" class="form-input" />
          </div>
          <div class="form-group">
            <label class="form-label" for="correo">Correo</label>
            <input id="correo" type="email" name="correo" [(ngModel)]="profile.correo" class="form-input" />
          </div>
          <div class="form-group">
            <label class="form-label" for="telefono">Teléfono</label>
            <input id="telefono" type="tel" name="telefono" [(ngModel)]="profile.telefono" class="form-input" />
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button (click)="closeAllModals()" class="secondary-button">Cancelar</button>
        <button (click)="saveProfile()" class="primary-button">Guardar Cambios</button>
      </div>
    </div>
  </div>

  <!-- Change Photo Modal -->
  <div *ngIf="showPhotoModal" class="modal-overlay">
    <div class="modal-container">
      <div class="modal-header">
        <h2 class="modal-title">Cambiar Foto de Perfil</h2>
        <button (click)="closeAllModals()" class="close-button">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="photo-upload-container">
          <div class="profile-avatar large">
            <svg class="avatar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="8" r="4"></circle>
              <path d="M20 21a8 8 0 0 0-16 0"></path>
            </svg>
          </div>
          <p class="photo-status">Esta es la foto actual del perfil.</p>
          <label class="file-input-label">
            <input type="file" (change)="onFileSelected($event)" accept=".jpg,.jpeg,.png" class="file-input" />
            Seleccionar Archivo
          </label>
          <p class="file-formats">Formatos permitidos: JPG, PNG</p>
        </div>
      </div>
      <div class="modal-footer">
        <button (click)="closeAllModals()" class="secondary-button">Cancelar</button>
        <button (click)="savePhoto()" class="primary-button">Guardar Cambios</button>
      </div>
    </div>
  </div>

  <!-- Change Password Modal -->
  <div *ngIf="showPasswordModal" class="modal-overlay">
    <div class="modal-container">
      <div class="modal-header">
        <h2 class="modal-title">Cambiar Contraseña</h2>
        <button (click)="closeAllModals()" class="close-button">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <p class="password-instruction">Introduce una nueva contraseña para tu cuenta.</p>
        <div class="form-fields">
          <div class="form-group">
            <label class="form-label" for="new-password">Contraseña Nueva</label>
            <input
              id="new-password"
              type="password"
              name="new"
              [(ngModel)]="passwords.new"
              class="form-input"
            />
          </div>
          <div class="form-group">
            <label class="form-label" for="confirm-password">Confirmar Contraseña</label>
            <input
              id="confirm-password"
              type="password"
              name="confirm"
              [(ngModel)]="passwords.confirm"
              class="form-input"
            />
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button (click)="closeAllModals()" class="secondary-button">Cancelar</button>
        <button (click)="savePassword()" class="primary-button">Guardar Cambios</button>
      </div>
    </div>
  </div>
</main>